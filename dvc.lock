schema: '2.0'
stages:
  teacher_train:
    cmd: ray job submit --address http://localhost:8265 --runtime-env=runtime-env.yaml
      --working-dir . -- export $(cat .env) && python src/teacher_train.py
    deps:
    - path: src/teacher_train.py
      hash: md5
      md5: 509c229650daf5464f11e06a3db1f131
      size: 4809
    - path: src/utils/utils.py
      hash: md5
      md5: e8ef01be781591170776543d2b39db0e
      size: 3550
    params:
      params.yaml:
        train-teacher:
          lr: 2e-05
          epochs: 1
          batch_size: 64
    outs:
    - path: metrics/teacher/training_plot.png
      hash: md5
      md5: f4a4f1f5916908cdb8b57e76d8b0e1d8
      size: 18803
    - path: models/teacher.pt
      hash: md5
      md5: 5cae39abc1940eb44eb859541a3151e4
      size: 343295946
  teacher_test:
    cmd: python src/teacher_test.py
    deps:
    - path: models/teacher.pt
      hash: md5
      md5: 5cae39abc1940eb44eb859541a3151e4
      size: 343295946
    - path: src/teacher_test.py
      hash: md5
      md5: 669738c37cbd8359889a1950656adcb6
      size: 4059
    outs:
    - path: data/teacher.npy
      hash: md5
      md5: 8fcb0a234b2cff0bf968faf3209c192c
      size: 3328
    - path: metrics/teacher/confusion_matrix.png
      hash: md5
      md5: 3c0f295767e668faf647b46be29796c5
      size: 33352
    - path: metrics/teacher/metrics.json
      hash: md5
      md5: 2c81915c2ef15e698a07db9d98a8b7e6
      size: 113
  student_train:
    cmd: ray job submit --address http://localhost:8265 --runtime-env=runtime-env.yaml
      --working-dir . -- export $(cat .env) && python src/student_train.py
    deps:
    - path: data/teacher.npy
      hash: md5
      md5: 8fcb0a234b2cff0bf968faf3209c192c
      size: 3328
    - path: src/student_train.py
      hash: md5
      md5: 55136cf9d1d977ff9368d3ea750936b2
      size: 7014
    - path: src/utils/utils.py
      hash: md5
      md5: e8ef01be781591170776543d2b39db0e
      size: 3550
    outs:
    - path: metrics/student/training_plot.png
      hash: md5
      md5: df0dae1c7a9519aaf52b78036ac2816c
      size: 18714
    - path: models/student.pt
      hash: md5
      md5: 8c2a0caaf2ca68bc626efae65e8668eb
      size: 9188994
  student_test:
    cmd: python src/student_test.py
    deps:
    - path: models/student.pt
      hash: md5
      md5: 8c2a0caaf2ca68bc626efae65e8668eb
      size: 9188994
    - path: src/student_test.py
      hash: md5
      md5: ce943f3430c9464d84182eec52c6961a
      size: 3167
    outs:
    - path: metrics/student/confusion_matrix.png
      hash: md5
      md5: 75693353d22e6558fd14491639268145
      size: 34856
    - path: metrics/student/metrics.json
      hash: md5
      md5: af01e7c365a8f4c979390ce38c302455
      size: 61
